### 1.6号改进方法
1.改进一下群聊的ack
2.改进一下rocketmq的ack
3.改进一下redis的注册逻辑 现在使用的是nacos_的回调 有时候有延时
4.改进一下websocket的退出，重连逻辑
5.改进一下心跳机制
6.需要去进入聊天界面滑动到最底部
7.需要重构一下rocketmq；目前使用的这个rocketmq 使用使用人数也太少；
8.这个我明显使用的是读扩散 ；
9.需要做redis 的防止当季机制，兜底策略
10.websocket集群这块还没有做好，websocket 集群路由还没有尝试。
包括nacos集群上下线感知也是需要做一下

11.目前这个架构里面读写分离和扩充读的服务器也是非常重要的.
12.后续必须要使用jemeter来测试一下.

### 1.8号改进方向;

```json

        #升级为gateway 代理websocket
        - id: websocket1
          uri: ws://127.0.0.1:8888
          predicates:
            - Path=/websocket
```

目前的这种没有办法进行负载均衡的；会全部到8888这个服务器上面；
所以需要研究一下websocket的负载均衡。才能实现；但是后续的redis，
mq都是已经做好集群的准备了

我已搭建了传统的Netty聊天室服务，
即一个SpringBoot项目中同时存在web项目与Netty服务器，配置如下：
服务器实际上会使用到两个端口，此时我们启动服务器并将其注册到Nacos当中！
默认的只会注册gateway的

先浅浅的改造了一点负载均衡 ，但是还没有完成的成为负载均衡，需要再看看

消息没有同步原理改天再看吧;
### 2.7号需要改进的东西
1.将refreshtoken的功能给引入
2.完善IM的的其他功能
3.分库分表的功能可以也加上了 给first模块给加上
